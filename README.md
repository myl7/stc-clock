# stc-clock

*The README is converted from docx. The format may not be good.*

2019-07-19

单片机课设报告

stc-clock：一款功能丰富的 STC 单片机闹钟

明宇龙  \<myl.ustc@gmail.com\>

功能与特点

显示时、分，按键后显示年、月、日，数盘中心圆点严格按照秒闪烁；

通过 UART 修改时间并写入硬件以实现校准；

整点响铃，并可自行通过按键设定某一特定时间响铃从而实现闹钟功能；

所有代码自行编写，模块化代码，并以 MIT License 发布。

实现简介

在主文件中，通过开关判断当前显示模式，时间显示模式下通过按钮判断应当显示时间抑或日期，闹钟设定模式下侦测按钮起落两过程以修改闹钟变量。不断进行时间比较，符合时一次性进行多次蜂鸣器震荡以实现发声。串口通信中利用中断，在接收到合适命令时改写 DS1302 中的硬件时间，从而实现时间校准。重写了已有的 DS1302 API，以解决许可证问题。

操作指南

开机后默认显示时间，中心圆点按秒闪烁。

按下 SW0 后显示日期，按下 SW1后显示年份，中心圆点不亮。

拨动 DIP0 后显示闹钟设定，中心圆点常亮。按下 SW0 后时 +1，按下 SW1 后分 +1，到达最大值后自动回到 0。

分秒同为 0 时响铃 2s，时分秒与闹钟设定相同时响铃 2s。

串口收到 0x01 时，后续 7 个字符将被接收并被写入到 DS1302 中以实现时间校准。要求时间格式为 BCD 码。

License 与 Repository

MIT License。已发布到 GitHub：<https://github.com/myl7/stc-clock>
